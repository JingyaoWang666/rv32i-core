//instruction memory(æŒ‡ä»¤å­˜å‚¨å™?)
//addrå³ä¸ºå½“å‰pcè¾“å‡ºï¼Œé?šå¸¸å†…éƒ¨ç”? addr[31:2] ä½œä¸ºå­—å¯»å?ç´¢å¼• 

//(è¿™æ˜¯å› ä¸ºæœ¬rv32içš„å¯»å?ç²’åº¦ä¸?1byte/8bit,å³pcè¾“å‡ºçš?1è¡¨ç¤º1ä¸ªå­—èŠ‚ã?‚è?Œæœ¬è®¾è®¡ä¸­å›ºå®šæŒ‡ä»¤é•¿åº¦ä¸º32bit=4byte=1wordï¼Œå¦‚æ?4å­—èŠ‚å¯¹é½çš„è¯ï¼?
//å³æŒ‡ä»¤åœ°å?éƒ½ä»¥4çš„å?æ•°å¼?å¤´ï¼Œpcçš„ä½ä¸¤ä½å§‹ç»ˆæ˜?0ï¼Œæ›´æ–°æ˜¯ä¹Ÿæ˜¯pc+4ï¼Œä½ä¸¤ä½æ²¡æœ‰ä¿¡æ¯é‡ã?‚ä½†ä¸ºäº†æ¥è¿‘é€šç”¨åœ°å€æ€»çº¿/32ä½å­—èŠ‚åœ°å?ï¼Œä¸æ•°æ®è®¿é—®
//æ€»çº¿ç›¸ç»Ÿä¸?ï¼Œä¸”å…¶ä»–å¤æ‚åŠŸèƒ½ä¼šç”¨åˆ°ä½ä¸¤ä½ï¼Œæ‰€ä»¥è¿™é‡Œè¿˜æ˜¯æŠŠä½ä¸¤ä½å†™ä¸Šäº†ã€‚ï¼‰

`include "rv32i_defs.vh"
module rv32i_instr_mem (
    input  wire [31:0] addr,        // byte address from PC
    output wire [31:0] instr
);
    
reg [31:0] instr_mem [0:`INSTR_MEM_DEPTH-1];

// åˆå§‹åŒ–inst_memï¼ŒåŠ è½½æ±‡ç¼–ç”Ÿæˆçš„æœºå™¨ç ?
initial begin
    // ç”¨hexæ–‡ä»¶ï¼ŒæŒ‡å®šèµ·å§‹åœ°å?
    $readmemh("inst_mem_init.mem", instr_mem, 0, `INSTR_MEM_DEPTH-1);
end

assign instr = instr_mem[addr[`INSTR_MEM_WIDTH+2-1:2]];

endmodule